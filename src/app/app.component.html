<header class="main-header">
  <h2>Welcome everyone to my Angular training exercise, enjoy!</h2>
  <p>From ICON with love</p>
</header>
<main>
  @if (isOpenModal) {
  <div class="backdrop"></div>
  <aside class="modal">
    <h2>Add New Meal</h2>
    <form #form="ngForm" (ngSubmit)="onSubmit($event)">
      <div class="form-control">
        <label for="name" [class.error]="nameInput.invalid && nameInput.touched"
          >Name</label
        >
        <input
          type="text"
          name="name"
          id="name"
          [class.error]="nameInput.invalid && nameInput.touched"
          [(ngModel)]="formData.name"
          #nameInput="ngModel"
          required
          #name
        />
        @if (nameInput.invalid && nameInput.touched){
        <div class="error">Name is required.</div>
        }
      </div>
      <div class="form-control">
        <label
          for="description"
          [class.error]="descriptionInput.invalid && descriptionInput.touched"
          >Description</label
        >
        <input
          type="text"
          name="description"
          id="description"
          [class.error]="descriptionInput.invalid && descriptionInput.touched"
          [(ngModel)]="formData.description"
          #descriptionInput="ngModel"
          required
        />
        @if (descriptionInput.invalid && descriptionInput.touched){
        <div class="error">Description is required.</div>
        }
      </div>
      <div class="form-control">
        <label
          for="price"
          [class.error]="priceInput.invalid && priceInput.touched"
          >Price</label
        >
        <input
          type="text"
          name="price"
          id="price"
          [class.error]="priceInput.invalid && priceInput.touched"
          [(ngModel)]="formData.price"
          #priceInput="ngModel"
          required
        />
        @if (priceInput.invalid && priceInput.touched){
        <div class="error">Price is required.</div>
        }
      </div>
      <div class="form-control">
        <label
          for="imageUrl"
          [class.error]="imageUrlInput.invalid && imageUrlInput.touched"
          >Image Url</label
        >
        <input
          type="text"
          name="imageUrl"
          id="imageUrl"
          [class.error]="imageUrlInput.invalid && imageUrlInput.touched"
          [(ngModel)]="formData.imageUrl"
          #imageUrlInput="ngModel"
          required
        />
        @if (imageUrlInput.invalid && imageUrlInput.touched){
        <div class="error">Image Url is required.</div>
        }
      </div>
      <div class="form-action">
        <div>
          <button class="btn btn-alt" (click)="closeModal()">Cancel</button>
          <button type="submit" class="btn" [disabled]="form.invalid">
            Confirm
          </button>
        </div>
      </div>
    </form>
  </aside>
  }
  <section class="meal">
    <div class="add-meal__btn">
      <button class="btn" (click)="openModal()">Add New Meal</button>
    </div>
    <ul class="meal-list">
      @for (item of dummyData; track $index) {
      <li class="meal-item">
        <article class="meal-item__card">
          <img class="meal-item__image" [src]="item.imageUrl" alt="" />
          <div class="meal-item__content">
            <span class="meal-item__name">{{ item.name }}</span>
            <span class="meal-item__price">{{
              item.price | currency : "USD" : "symbol"
            }}</span>
          </div>
          <p class="meal-item__description">
            {{ item.description }}
          </p>
          @if (item.bookmark) {
          <img
            loading="lazy"
            class="meal-item__bookmark"
            src="assets/bookmark-enable.svg"
            alt="Example Icon"
            (click)="toggleBookmark(item)"
          />
          }@else {
          <img
            loading="lazy"
            class="meal-item__bookmark"
            src="assets/bookmark-disable.svg"
            alt="Example Icon"
            (click)="toggleBookmark(item)"
          />
          }
        </article>
      </li>
      }
    </ul>
  </section>
</main>
